<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Proxen - Privacy-focused AI to-do list</title>
    <meta name="google-site-verification" content="google-site-verification=mkMJ_7ghtkSU3ssMFUsK_pOe76gULNfzKuectzQQVKQ" />
    <meta name="description" content="Proxen is a privacy-focused AI productivity tool that helps you plan tasks without tracking, accounts, or data collection.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/assets/icon-192.png">

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('Proxen PWA Ready'))
        .catch(err => console.error('PWA Registration Failed', err));
    });
  }
</script>

</head>
<body>

    <!-- App Container -->
    <div id="app">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="header-label">Proxen</div>
                    <div class="header-divider"></div>
                    <div class="header-version clickable" id="version-btn" title="View changelog">v1.2</div>
                </div>
                <button id="reset-btn" class="reset-btn hidden" title="Clear all data and reset">
                    Reset System
                </button>
            </div>
        </header>

        <!-- VIEW: LANDING -->
        <section id="view-landing" class="view-section hidden">
            <div class="landing-container">
                <div class="landing-content">
                    <!-- Main heading -->
                    <div class="landing-header">
                        <h1 class="landing-title">
                            <span class="title-line primary">The user talks.</span>
                            <span class="title-line primary">The AI organizes.</span>
                            <span class="title-line secondary">The Task Gets Done.</span>
                        </h1>
                        <div class="title-underline"></div>
                    </div>

                    <!-- Core principles -->
                    <div class="landing-sections">
                        <div class="landing-section">
                            <h2 class="section-title">What this is</h2>
                            <p class="section-text">
                                A local-first productivity tool built on a simple principle: 
                                <span class="text-emphasis">you shouldn't have to manage structure while you're trying to think</span>.
                            </p>
                            <p class="section-text">
                                You speak naturally. The AI translates your thoughts into tasks. 
                                The interface shows you what's real.
                            </p>
                        </div>

                        <!-- COLLAPSIBLE TRANSPARENCY SECTION (v1.1) -->
                        <div class="landing-section">
                            <div class="collapsible-header" id="transparency-toggle">
                                <h2 class="section-title">How does this work?</h2>
                                <span class="collapse-icon">▼</span>
                            </div>
                            <div class="collapsible-content" id="transparency-content">
                                <div class="transparency-grid">
                                    <div class="transparency-item">
                                        <span class="transparency-label">AI Model:</span>
                                        <span class="transparency-value">Gemma 3 27B IT (Google)</span>
                                    </div>
                                    <div class="transparency-item">
                                        <span class="transparency-label">API Endpoint:</span>
                                        <span class="transparency-value">generativelanguage.googleapis.com</span>
                                    </div>
                                    <div class="transparency-item">
                                        <span class="transparency-label">Data Flow:</span>
                                        <span class="transparency-value">Browser → Google API → Browser</span>
                                    </div>
                                    <div class="transparency-item">
                                        <span class="transparency-label">Proxen's Access:</span>
                                        <span class="transparency-value">None. No data passes through Proxen servers.</span>
                                    </div>
                                    <div class="transparency-item">
                                        <span class="transparency-label">Storage:</span>
                                        <span class="transparency-value">Local device only (browser localStorage)</span>
                                    </div>
                                </div>
                                <div class="transparency-footer">
                                    <button onclick="app.showTechnicalDetails()" class="link-button">
                                        View Full Technical Details →
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="landing-section">
                            <h2 class="section-title">Functionalities</h2>
                            <ul class="feature-list">
                                <li class="feature-item">
                                    <span class="feature-arrow">→</span>
                                    <span>You don't click checkboxes. You don't fill in forms. You talk.</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-arrow">→</span>
                                    <span>The AI organizes your thoughts into actionable tasks.</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-arrow">→</span>
                                    <span>When you complete something, you say so. The AI updates the state.</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-arrow">→</span>
                                    <span>The list is a reflection of reality, not a control panel.</span>
                                </li>
                            </ul>
                        </div>

                        <div class="landing-section">
                            <h2 class="section-title">What makes this different</h2>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <div class="card-title">No accounts</div>
                                    <div class="card-text">No registration, no authentication, no user profiles.</div>
                                </div>
                                <div class="feature-card">
                                    <div class="card-title">No servers</div>
                                    <div class="card-text">Your data never leaves your browser. Ever.</div>
                                </div>
                                <div class="feature-card">
                                    <div class="card-title">No cloud sync</div>
                                    <div class="card-text">Local-only. Device-specific. Private by architecture.</div>
                                </div>
                                <div class="feature-card">
                                    <div class="card-title">No tracking</div>
                                    <div class="card-text">We literally cannot see what you're doing.</div>
                                </div>
                            </div>
                        </div>

                        <div class="landing-section">
                            <h2 class="section-title">About the AI</h2>
                            <p class="section-text">
                                This tool uses an AI companion that acts as a productivity partner. 
                                It's not a cheerleader. It's not a therapist. It's not trying to be your friend.
                            </p>
                            <p class="section-text">
                                Think of it as <span class="text-emphasis">a tired but competent person</span> who helps you 
                                track what needs doing. Slightly dry. Occasionally sarcastic. Always focused on getting things done.
                            </p>
                            <p class="section-text">
                                It will acknowledge your progress without making it feel like a participation trophy.
                            </p>
                        </div>

                        <div class="landing-footer">
                            <p class="footer-text">
                                <strong>Early-Stage Project:</strong> This is version 1.1. Transparency and verifiability 
                                are ongoing priorities. This app does not collect or transmit data to Proxen servers, 
                                but it cannot protect against compromised browsers, malicious extensions, or stolen devices.
                            </p>
                            <div class="footer-links">
                                <button onclick="app.showPrivacy()" class="link-button">Privacy & Data</button>
                                <span class="footer-divider">•</span>
                                <button onclick="app.showThreatModel()" class="link-button">Threat Model</button>
                                <span class="footer-divider">•</span>
                                <a href="https://github.com/xensenx/Proxen" target="_blank" class="link-button">Source Code</a>
                            </div>
                        </div>
                    </div>

                    <!-- CTA -->
                    <div class="landing-cta">
                        <button onclick="app.transition('apiKey')" class="cta-button">
                            <span class="cta-text">Initialize System</span>
                            <span class="cta-arrow">→</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: API KEY -->
        <section id="view-apiKey" class="view-section centered-view hidden">
            <div class="form-container">
                <div class="form-header">
                    <h2 class="form-title">Authentication Required</h2>
                    <div class="title-underline"></div>
                </div>

                <div class="form-description">
                    <p class="section-text">
                        This tool uses <span class="text-emphasis">Google's Gemma 3 27B IT</span> model 
                        for all AI interactions. This model offers higher request limits than alternatives.
                    </p>
                    <p class="section-text">
                        You must provide your own API key. The key is stored locally in your browser's 
                        <code class="code-inline">localStorage</code> 
                        and is only sent directly to Google's API when you interact with the AI.
                    </p>
                    <p class="section-text muted">
                        Proxen does not see your key. Proxen does not handle your requests. This is direct communication 
                        between your browser and Google's servers.
                    </p>
                </div>

                <div class="form-inputs">
                    <div class="input-wrapper">
                        <input type="password" 
                               id="api-key-input" 
                               placeholder="Paste your Gemini API key here" 
                               class="text-input"
                               autocomplete="off">
                        <div class="input-icon">
                            <div class="key-dots">⨀</div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <div class="form-links">
                            <a href="https://aistudio.google.com/app/apikey" 
                               target="_blank" 
                               class="form-link">
                                Get a key from Google AI Studio →
                            </a>
                            <button onclick="app.showTestModal()" class="form-link test-link">
                                Test your API key first →
                            </button>
                        </div>
                        <button onclick="app.saveApiKey()" class="btn-primary">
                            Continue
                        </button>
                    </div>
                    <p id="api-error" class="error-text hidden">
                        Invalid key format. Check the key and try again.
                    </p>
                </div>

                <!-- API KEY SCOPE DETAILS (v1.1) - Below the form -->
                <div class="api-scope-details">
                    <button class="scope-toggle" id="scope-toggle">
                        <span class="scope-toggle-text">What will this API key be used for?</span>
                        <span class="scope-toggle-icon">▼</span>
                    </button>
                    <div class="scope-content hidden" id="scope-content">
                        <div class="scope-grid">
                            <div class="scope-item">
                                <span class="scope-label">Model:</span>
                                <span class="scope-value">Gemma 3 27B IT (Instruction Tuned)</span>
                            </div>
                            <div class="scope-item">
                                <span class="scope-label">Endpoint:</span>
                                <span class="scope-value">generativelanguage.googleapis.com/v1beta/models/gemma-3-27b-it:generateContent</span>
                            </div>
                            <div class="scope-item">
                                <span class="scope-label">Purpose:</span>
                                <span class="scope-value">Text generation for task management (inference only)</span>
                            </div>
                            <div class="scope-item">
                                <span class="scope-label">Not Used For:</span>
                                <span class="scope-value">Fine-tuning, training, data storage, or analytics</span>
                            </div>
                            <div class="scope-item">
                                <span class="scope-label">Transmission:</span>
                                <span class="scope-value">Sent directly from browser to Google (never through Proxen)</span>
                            </div>
                            <div class="scope-item">
                                <span class="scope-label">Billing:</span>
                                <span class="scope-value">The Ai model we use comes under free-tier and does not require any billing</span>
                            </div>
                        </div>
                        <div class="scope-recommendation">
                            <strong>Recommendation:</strong> Create a restricted or project-specific API key. 
                            You can manage keys at <a href="https://aistudio.google.com/app/apikey" target="_blank" class="inline-link">Google AI Studio</a>.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- API TEST MODAL -->
        <div id="test-modal" class="modal hidden">
            <div class="modal-overlay" onclick="app.closeTestModal()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Test API Key</h3>
                    <button class="modal-close" onclick="app.closeTestModal()">×</button>
                </div>
                <div class="modal-body">
                    <p class="modal-description">
                        Verify your API key works before continuing. This will make test requests to Gemma 3 27B IT.
                    </p>
                    <input type="password" 
                           id="test-api-input" 
                           placeholder="Paste your API key here" 
                           class="text-input">
                    <button onclick="app.runAPITest()" class="btn-primary" id="test-btn">
                        Run Test
                    </button>
                    <div id="test-results" class="test-results hidden"></div>
                </div>
            </div>
        </div>

        <!-- TECHNICAL DETAILS MODAL (v1.1) -->
        <div id="technical-modal" class="modal hidden">
            <div class="modal-overlay" onclick="app.closeTechnicalModal()"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 class="modal-title">Technical Details & Data Flow</h3>
                    <button class="modal-close" onclick="app.closeTechnicalModal()">×</button>
                </div>
                <div class="modal-body">
                    <section class="info-section">
                        <h4 class="info-subtitle">Data Flow</h4>
                        <div class="data-flow-diagram">
                            <div class="flow-step">Your Browser</div>
                            <div class="flow-arrow">↓</div>
                            <div class="flow-step">Google AI API</div>
                            <div class="flow-arrow">↓</div>
                            <div class="flow-step">Your Browser</div>
                        </div>
                        <p class="info-text">
                            When you send a message, your browser makes a direct HTTPS request to Google's API. 
                            The response returns directly to your browser. Proxen's servers 
                            are not part of this chain.
                        </p>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">What Proxen Does Not Do</h4>
                        <ul class="info-list">
                            <li>Does not log requests or responses</li>
                            <li>Does not store messages on any server</li>
                            <li>Does not forward data to third parties</li>
                            <li>Does not perform analytics or telemetry</li>
                            <li>Does not use your data for fine-tuning or training</li>
                            <li>Does not create user accounts or profiles</li>
                            <li>Does not track you across sessions or devices</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Local Storage Details</h4>
                        <p class="info-text">
                            Proxen stores the following in your browser's <code>localStorage</code>:
                        </p>
                        <ul class="info-list">
                            <li><strong>API Key:</strong> Your Google API key (encrypted by browser, not by Proxen)</li>
                            <li><strong>Username:</strong> The name you provide for personalization</li>
                            <li><strong>Tasks:</strong> Your task list and completion status</li>
                            <li><strong>Conversation History:</strong> Last 6 messages for context (stored locally only)</li>
                        </ul>
                        <p class="info-text">
                            This data never leaves your device. It is not synced to any cloud service by Proxen.
                        </p>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Verification</h4>
                        <p class="info-text">You can verify this behavior by:</p>
                        <ul class="info-list">
                            <li>Opening browser DevTools (F12) and monitoring the Network tab</li>
                            <li>Confirming all API requests go to generativelanguage.googleapis.com</li>
                            <li>Reviewing the source code at <a href="https://github.com/xensenx/Proxen" target="_blank" class="inline-link">github.com/xensenx/Proxen</a></li>
                            <li>Inspecting localStorage in DevTools → Application → Local Storage</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Source Code & Contact</h4>
                        <p class="info-text">
                            <strong>Repository:</strong> <a href="https://github.com/xensenx/Proxen" target="_blank" class="inline-link">github.com/xensenx/Proxen</a><br>
                            <strong>Creator:</strong> <a href="https://github.com/xensenx" target="_blank" class="inline-link">github.com/xensenx</a>
                        </p>
                        <p class="info-text">
                            The deployed version corresponds to the public repository. You can compare deployed 
                            code against the repository to verify this claim.
                        </p>
                    </section>
                </div>
            </div>
        </div>

        <!-- PRIVACY MODAL (v1.1) -->
        <div id="privacy-modal" class="modal hidden">
            <div class="modal-overlay" onclick="app.closePrivacyModal()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Privacy & Data Handling</h3>
                    <button class="modal-close" onclick="app.closePrivacyModal()">×</button>
                </div>
                <div class="modal-body">
                    <section class="info-section">
                        <h4 class="info-subtitle">What Data Is Stored</h4>
                        <p class="info-text">Proxen stores the following on your device only:</p>
                        <ul class="info-list">
                            <li>Your Google API key</li>
                            <li>Your chosen username</li>
                            <li>Your task list</li>
                            <li>Recent conversation context (last 6 messages)</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Where It Is Stored</h4>
                        <p class="info-text">
                            All data is stored in your browser's <code>localStorage</code> on this device. 
                            It does not sync to any cloud service operated by Proxen.
                        </p>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">What Data Is Never Collected</h4>
                        <ul class="info-list">
                            <li>Email addresses or contact information</li>
                            <li>IP addresses or location data</li>
                            <li>Usage analytics or telemetry</li>
                            <li>Device fingerprints</li>
                            <li>Browsing history</li>
                            <li>Any personally identifiable information</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Third-Party Data Sharing</h4>
                        <p class="info-text">
                            When you interact with the AI, your messages are sent directly to Google's API. 
                            Google's privacy policy applies to that interaction. Proxen does not receive copies 
                            of these messages.
                        </p>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">How to Remove All Data</h4>
                        <p class="info-text">To completely remove all Proxen data from your device:</p>
                        <ol class="info-list numbered">
                            <li>Click "Reset System" in the header, or</li>
                            <li>Clear your browser's localStorage manually in DevTools, or</li>
                            <li>Clear your browser's site data for this domain</li>
                        </ol>
                        <p class="info-text">
                            After removal, no trace of Proxen data remains on your device.
                        </p>
                    </section>
                </div>
            </div>
        </div>

        <!-- THREAT MODEL MODAL (v1.1) -->
        <div id="threat-modal" class="modal hidden">
            <div class="modal-overlay" onclick="app.closeThreatModal()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Threat Model</h3>
                    <button class="modal-close" onclick="app.closeThreatModal()">×</button>
                </div>
                <div class="modal-body">
                    <section class="info-section">
                        <h4 class="info-subtitle protected">What Proxen Protects Against</h4>
                        <ul class="info-list">
                            <li><strong>Server breaches:</strong> There are no Proxen servers to breach</li>
                            <li><strong>Account database leaks:</strong> There are no user accounts</li>
                            <li><strong>Third-party tracking:</strong> No analytics or tracking scripts</li>
                            <li><strong>Data mining:</strong> Proxen cannot access or analyze your data</li>
                            <li><strong>Cross-device profiling:</strong> Data never leaves your device</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle vulnerable">What Proxen Does Not Protect Against</h4>
                        <ul class="info-list">
                            <li><strong>Compromised browsers:</strong> If your browser is compromised, all local data is at risk</li>
                            <li><strong>Malicious browser extensions:</strong> Extensions can read localStorage and intercept requests</li>
                            <li><strong>Stolen or unlocked devices:</strong> Anyone with physical access can access your data</li>
                            <li><strong>Network interception:</strong> While HTTPS protects in transit, compromised networks may pose risks</li>
                            <li><strong>Google API vulnerabilities:</strong> Proxen relies on Google's security</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h4 class="info-subtitle">Honest Assessment</h4>
                        <p class="info-text">
                            Proxen's architecture minimizes certain risks by not operating servers or storing data centrally. 
                            However, this does not make it immune to all threats. The weakest links are:
                        </p>
                        <ul class="info-list">
                            <li>Your device's security</li>
                            <li>Your browser's integrity</li>
                            <li>The security of Google's API</li>
                        </ul>
                        <p class="info-text">
                            Proxen cannot protect against these threats. If any of these are compromised, your data may be at risk.
                        </p>
                    </section>
                </div>
            </div>
        </div>

        <!-- CHANGELOG MODAL (v1.1) -->
        <div id="changelog-modal" class="modal hidden">
            <div class="modal-overlay" onclick="app.closeChangelogModal()"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 class="modal-title">Version History</h3>
                    <button class="modal-close" onclick="app.closeChangelogModal()">×</button>
                </div>
                <div class="modal-body">
                    <section class="changelog-section">
                        <div class="version-header">
                            <h4 class="version-number">v1.2</h4>
                            <span class="version-date">Current</span>
                        </div>
                        <h5 class="version-subtitle">Task Drawer & UI Refinements</h5>
                        <ul class="changelog-list">
                            <li>Implemented pull-down Task Drawer for better organization</li>
                            <li>Replaced sidebar with unobtrusive task management UI</li>
                            <li>Added visual peek animation when tasks are added</li>
                            <li>Improved task count visibility with badge system</li>
                            <li>Simplified chat timeline (removed redundant task cards)</li>
                            <li>Fixed text selection behavior across the application</li>
                        </ul>
                    </section>

                    <section class="changelog-section">
                        <div class="version-header">
                            <h4 class="version-number">v1.1</h4>
                            <span class="version-date">Previous</span>
                        </div>
                        <h5 class="version-subtitle">Transparency & Trust Update</h5>
                        <ul class="changelog-list">
                            <li>Added collapsible transparency section on landing page</li>
                            <li>Added detailed technical documentation modal</li>
                            <li>Added explicit API key scope explanation</li>
                            <li>Added Privacy & Data Handling page</li>
                            <li>Added Threat Model documentation</li>
                            <li>Added public source code links and creator information</li>
                            <li>Added interactive changelog</li>
                            <li>Added early-stage project disclosure</li>
                            <li>Improved UI/UX with centered modals and better spacing</li>
                        </ul>
                    </section>

                    <section class="changelog-section">
                        <div class="version-header">
                            <h4 class="version-number">v1.0</h4>
                            <span class="version-date">Initial Release</span>
                        </div>
                        <h5 class="version-subtitle">Core Functionality</h5>
                        <ul class="changelog-list">
                            <li>Natural language task management interface</li>
                            <li>Gemma 3 27B IT integration via Google API</li>
                            <li>Local-first architecture with no server dependencies</li>
                            <li>Task creation, completion, and deletion via conversation</li>
                            <li>Smart intent detection and context awareness</li>
                            <li>Inline task updates with visual connections</li>
                            <li>Momentum tracking and appropriate AI responses</li>
                        </ul>
                    </section>

                    <section class="changelog-section roadmap">
                        <h4 class="roadmap-title">Planned Improvements</h4>
                        <ul class="changelog-list">
                            <li>Enhanced error recovery and retry logic</li>
                            <li>Task prioritization and scheduling features</li>
                            <li>Export functionality for task data</li>
                            <li>Improved mobile experience</li>
                            <li>Optional task categories and tags</li>
                            <li>Continued transparency and security improvements</li>
                        </ul>
                        <p class="roadmap-note">
                            Note: This roadmap is subject to change based on user feedback and technical constraints.
                        </p>
                    </section>
                </div>
            </div>
        </div>

        <!-- VIEW: NAME ENTRY -->
        <section id="view-name" class="view-section centered-view hidden">
            <div class="form-container">
                <div class="form-header">
                    <h2 class="form-title">Identity</h2>
                    <div class="title-underline"></div>
                </div>

                <div class="form-description">
                    <p class="section-text">
                        What should the system call you?
                    </p>
                    <p class="section-text muted">
                        This is purely for personalization. The AI will use this name in conversation. 
                        You can use your real name, a nickname, or anything else. It doesn't matter to us.
                    </p>
                </div>

                <div class="form-inputs">
                    <input type="text" 
                           id="name-input" 
                           placeholder="Name or alias" 
                           autocomplete="off"
                           class="text-input">
                    
                    <div class="form-actions right">
                        <button onclick="app.saveName()" class="btn-primary">
                            Begin
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: WORKSPACE -->
        <section id="view-workspace" class="view-section workspace-view hidden">
            
            <!-- TASK DRAWER - Pull down from top like notifications -->
            <div id="task-drawer" class="task-drawer">
                <div class="drawer-tab" id="drawer-tab">
                    <div class="tab-handle"></div>
                    <span class="task-badge" id="task-badge">0</span>
                </div>
                
                <div class="drawer-panel" id="drawer-panel">
                    <div class="drawer-header">
                        <h3>Tasks</h3>
                        <button class="drawer-close-btn" id="drawer-close">×</button>
                    </div>
                    
                    <div class="drawer-body">
                        <div class="task-group">
                            <div class="task-group-header">
                                <span>Active</span>
                                <span class="task-count" id="active-count">0</span>
                            </div>
                            <div id="active-tasks" class="task-list"></div>
                        </div>
                        
                        <div class="task-group completed-group">
                            <div class="task-group-header">
                                <span>Completed</span>
                                <span class="task-count" id="completed-count">0</span>
                            </div>
                            <div id="completed-tasks" class="task-list"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Setup Overlay -->
            <div id="setup-overlay" class="setup-overlay hidden">
                <div class="setup-content">
                    <div class="setup-spinner">
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                    </div>
                    <p class="setup-text">Initializing system...</p>
                    <p class="setup-subtext">Setting up your workspace</p>
                </div>
            </div>
            
            <!-- Main Content: Chat with inline tasks -->
            <div class="main-content">
                
                <!-- Chat Timeline -->
                <div id="chat-timeline" class="chat-timeline">
                    <!-- Empty state shown before first interaction -->
                    <div id="empty-workspace" class="empty-workspace">
                        <div class="empty-icon">○</div>
                        <p class="empty-text">System idle</p>
                        <p class="empty-subtext">Start a conversation to begin</p>
                    </div>
                </div>

                <!-- Suggestions Panel (shows on empty or when requested) -->
                <div id="suggestions-panel" class="suggestions-panel">
                    <div class="suggestions-header">Try saying:</div>
                    <div class="suggestion-pills">
                        <button class="suggestion-pill" data-prompt="I need to finish my assignment and report by Thursday">
                            "I need to finish my assignment and report by Thursday"
                        </button>
                        <button class="suggestion-pill" data-prompt="Done with the assignments">
                            "Done with the assignments"
                        </button>
                        <button class="suggestion-pill" data-prompt="Help me break down studying for finals">
                            "Help me break down studying for finals"
                        </button>
                        <button class="suggestion-pill" data-prompt="What should I tackle first?">
                            "What should I tackle first?"
                        </button>
                    </div>
                </div>

            </div>

            <!-- Input Area (fixed at bottom) -->
            <div class="input-section">
                <!-- Status bar -->
                <div class="status-bar">
                    <div class="status-left">
                        <div id="status-dot" class="status-dot ready"></div>
                        <span id="status-text" class="status-text">Ready</span>
                    </div>
                    <div class="status-right">
                        <button id="help-btn" class="help-btn" title="Show suggestions">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Input field -->
                <div class="input-wrapper">
                    <textarea id="user-input" 
                              placeholder="What needs doing?" 
                              rows="1"
                              class="user-input"></textarea>
                    <button id="send-btn" 
                            disabled
                            class="send-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </div>

                <!-- Typing indicator -->
                <div id="typing-indicator" class="typing-indicator hidden">
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                    <span class="typing-label">Processing</span>
                </div>
            </div>

        </section>

    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <span class="footer-text">Proxen • © 2026 • <a href="https://github.com/xensenx" target="_blank" class="footer-link">xensenx</a></span>
        </div>
    </footer>

    <script src="app.js"></script>

</body>
</html>
